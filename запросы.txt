CREATE TABLE `users` (
  `id` int NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `email` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `email_UNIQUE` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb3;


INSERT INTO `simpledb`.`users` (`id`, `name`, `email`) VALUES ('1', 'Ivan', 'ivan@gmail.com');
INSERT INTO `simpledb`.`users` (`id`, `name`, `email`) VALUES ('2', 'Alexandr', 'alex@gmail.com');
INSERT INTO `simpledb`.`users` (`id`, `name`, `email`) VALUES ('3', 'Leonid', 'leo@gmail.com');


UPDATE `simpledb`.`users` SET `name` = 'Alex' WHERE (`id` = '2');
UPDATE `simpledb`.`users` SET `name` = 'Leo' WHERE (`id` = '3');


ALTER TABLE `simpledb`.`users` 
ADD COLUMN `age` VARCHAR(45) NOT NULL AFTER `email`;



ALTER TABLE `simpledb`.`users` 
ADD COLUMN `bday` DATE NULL AFTER `gender`,
ADD COLUMN `postal_code` VARCHAR(10) NULL AFTER `bday`,
ADD COLUMN `rating` FLOAT NULL AFTER `postal_code`,
ADD COLUMN `created` TIMESTAMP NULL DEFAULT 'CURRENT_TIMESTAMP()' AFTER `rating`,
CHANGE COLUMN `age` `gender` ENUM('M', 'F') NOT NULL ;



ALTER TABLE `simpledb`.`users` 
ADD COLUMN `bday` DATE NULL AFTER `gender`,
ADD COLUMN `postal_code` VARCHAR(10) NULL AFTER `bday`,
ADD COLUMN `rating` FLOAT NULL AFTER `postal_code`,
ADD COLUMN `created` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP() AFTER `rating`,
CHANGE COLUMN `name` `name` VARCHAR(50) NULL ,
CHANGE COLUMN `email` `email` VARCHAR(45) NULL ,
CHANGE COLUMN `age` `gender` ENUM('M', 'F') NULL ,
DROP INDEX `email_UNIQUE` ;
;





CREATE TABLE `simpledb`.`resume` (
  `resumeid` INT NOT NULL AUTO_INCREMENT,
  `userid` INT NOT NULL,
  `title` VARCHAR(100) NOT NULL,
  `skills` TEXT NULL,
  `created` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP(),
  PRIMARY KEY (`resumeid`),
  INDEX `userid_idx` (`userid` ASC) VISIBLE,
  CONSTRAINT `userid`
    FOREIGN KEY (`userid`)
    REFERENCES `simpledb`.`users` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE);




INSERT INTO `simpledb`.`resume` (`userid`, `title`, `skills`) VALUES (2, 'doklad1', 'clairvoyance');
INSERT INTO `simpledb`.`resume` (`userid`, `title`, `skills`) VALUES (3, 'doklad2', 'magic');
INSERT INTO `simpledb`.`resume` (`userid`, `title`, `skills`) VALUES (1, 'doklad3', 'X-RAY');
INSERT INTO `simpledb`.`resume` (`userid`, `title`, `skills`) VALUES (4, 'doklad4', 'Invisibility');



DELETE FROM `simpledb`.`users` WHERE (`id` = '2');
DELETE FROM `simpledb`.`users` WHERE (`id` = '4');






